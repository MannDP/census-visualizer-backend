{"version":3,"sources":["stores/PersistenceStore.js","network/api/Api.js","stores/UserStore.js","pages/login/LoginPage.js","pages/register/RegisterPage.js","pages/home/TopNavigationBar.js","pages/dashboard/modal/ShareQueryModal.js","pages/dashboard/modal/CreateSearchQueryModal.js","pages/dashboard/Legend.js","pages/dashboard/VisualQueryEditor.js","pages/dashboard/Map.js","pages/dashboard/Settings.js","pages/friends/FriendsPage.js","pages/dashboard/Dashboard.js","App.js","index.js"],"names":["appLoadRoutine","a","localStorage","getItem","storageValue","obj","JSON","parse","UserStore","authToken","token","userInfo","firstName","lastName","PersistenceStore","isLoading","this","Promise","all","map","routine","key","data","setItem","valueOf","stringify","removeItem","decorate","observable","fetchItems","action","persistenceStore","Api","createRequest","endpoint","requestType","payload","resolve","reject","axios","request","url","method","headers","Authorization","undefined","response","signUpUser","signInUser","fetchAllQueries","saveQuery","deleteQueries","runQueries","getUserMe","updateDarkMode","searchFriend","addFriend","fetchFriends","getFriendQueries","shareQueries","getSharedQueries","updateIcon","duplicateQueries","userCredentials","requestError","requestErrorDetail","message","user","first_name","last_name","clearItem","length","loginUser","resetErrors","logout","fetchUser","userStore","Title","Typography","layout","labelCol","span","wrapperCol","tailLayout","offset","LoginPageNoRouter","state","loginFailed","onFinish","values","success","props","history","push","setState","onFinishFailed","errorInfo","console","log","style","width","margin","textAlign","level","name","initialValues","remember","marginBottom","type","Item","label","rules","required","Password","valuePropName","htmlType","React","Component","LoginPageWithRouter","withRouter","RegisterPageNoRouter","registerFailed","RegisterPageWithRouter","Menu","SubMenu","RightContainer","styled","div","TopNavigationBar","current","handleClick","e","onClick","selectedKeys","mode","to","ShareQueryModal","Select","Option","queries","visible","onCreate","onCancel","useState","value","setValue","friendsVal","setFriendsVal","entries","setEntries","onSelect","username","split","onSearch","searchText","friends","title","okText","cancelText","onOk","result","i","j","display","onChange","options","justifyContent","Search","size","placeholder","enterButton","columns","dataIndex","dataSource","friend","id","CreateSearchQueryModal","isCreate","query","databaseVal","setDatabaseVal","Form","useForm","form","useEffect","database","setFieldsValue","employment","income","education","sex","age","getFieldsValue","validateFields","then","resetFields","catch","info","showSearch","defaultValue","optionFilterProp","Legend","minimum","maximum","color","units","queryId","scale","toFixed","Math","round","className","backgroundColor","idx","opacity","VisualQueryEditor","colors","changeColor","colorIndex","selected","q","index","findIndex","qid","heatmap","paint","makeNewColors","postSelect","onColorChange","changeCurve","curve","max","b","min","mag","weight","resetCurve","save","dtos","onSaveDto","nextProps","nextContext","c","r","g","nextState","val","Group","direction","ev","target","Button","padding","height","handleColor","marginTop","Sider","Layout","Content","educationLUT","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","educationLUTReverse","incomeLUT","16","incomeLUTReverse","sexLUT","sexLUTReverse","ageLUT","ageLUTReverse","employmentLUT","employmentLUTReverse","Map","saveDto","ret","toggleQuerySelected","toggleResultSelected","queryResults","toggleModalVisible","modalVisible","queryExists","currQuery","querySelected","buildQueryArrayHelper","array","str","buildQuery","onViewportChange","viewport","etc","overrideColor","overrides","Date","getTime","latitude","longitude","zoom","maxZoom","selectedTime","mapStyle","sharedQueries","shareModalVisible","fetchData","setMapStyle","dark_mode","user_name","userQueries","apiQueries","apiQuery","params","dataset","queryWrapper","oldQueries","firstSelected","navigator","clipboard","writeText","queriesToDelete","splice","deleteQueriesAPI","qids","queriesToRun","queriesSelected","prevProps","prevState","snapshot","anyUpdated","allDay","startTime","endTime","isShowFirstLayer","isShowSecondLayer","minHeight","addQueryToBuilder","shareMyQueries","theme","collapsible","collapsed","icon","PlusOutlined","disabled","DeleteOutlined","loading","SearchOutlined","checked","EditOutlined","position","mapboxApiAccessToken","layer","find","dto","hue","iconMap","0","UserOutlined","SketchOutlined","DribbbleOutlined","HeartOutlined","WomanOutlined","StarOutlined","RocketOutlined","FireOutlined","Settings","toggleDarkMode","isDarkModeEnabled","first","last","numQueries","showModal","fetchUserInfo","num_queries","align","centered","footer","FriendsPage","modalUsername","render","text","record","getUserQueries","queryColumns","req","flexDirection","paddingTop","Dashboard","page","onCollapse","defaultSelectedKeys","PieChartOutlined","UsergroupAddOutlined","SettingOutlined","LoginOutlined","Container","App","path","ReactDOM","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.e8ce7a92.chunk.js","sourcesContent":["import { action, observable, decorate } from 'mobx'\r\nimport { UserStore } from './UserStore'\r\n\r\nexport const USER_SESSION = 'UserSession';\r\n\r\nconst appLoadRoutine = [\r\n  async () => {\r\n    const storageValue = await localStorage.getItem(USER_SESSION)\r\n    if (storageValue === null) {\r\n      return\r\n    }\r\n    const obj = JSON.parse(storageValue)\r\n    UserStore.authToken = obj.token\r\n    UserStore.userInfo = {\r\n      firstName: obj.firstName,\r\n      lastName: obj.lastName\r\n    }\r\n  },\r\n]\r\n\r\nclass PersistenceStore {\r\n  isLoading = true\r\n\r\n  async fetchItems() {\r\n    this.isLoading = true\r\n    await Promise.all(appLoadRoutine.map((routine) => routine()))\r\n    this.isLoading = false\r\n  }\r\n\r\n  setItem(key, data) {\r\n    localStorage.setItem(key.valueOf(), JSON.stringify(data))\r\n  }\r\n\r\n  clearItem(key) {\r\n    localStorage.removeItem(key.valueOf())\r\n  }\r\n}\r\n\r\ndecorate(PersistenceStore, {\r\n  isLoading: observable,\r\n  fetchItems: action\r\n})\r\n\r\nconst persistenceStore = new PersistenceStore()\r\n\r\nexport { persistenceStore as PersistenceStore }","import axios from 'axios'\r\nimport { UserStore } from '../../stores/UserStore'\r\n\r\nexport const baseUrl = 'http://census-viz.herokuapp.com/'\r\n\r\nexport class Api {\r\n  static createRequest = (\r\n    endpoint,\r\n    requestType,\r\n    payload\r\n  ) =>\r\n    new Promise(async (resolve, reject) => {\r\n      try {\r\n        const response = await axios.request({\r\n          url: `${baseUrl}${endpoint}`,\r\n          method: requestType,\r\n          headers: {\r\n            Authorization:\r\n              (UserStore.authToken && `Bearer ${UserStore.authToken}`) || '',\r\n            'Content-Type': 'application/json',\r\n          },\r\n          data: payload === undefined ? undefined : payload,\r\n        })\r\n        resolve(response.data)\r\n      } catch (e) {\r\n        const {\r\n          response: { data },\r\n        } = e\r\n        reject(data)\r\n      }\r\n    })\r\n\r\n  static signUpUser = async (payload) => {\r\n    await Api.createRequest('user/register', 'POST', payload)\r\n  }\r\n\r\n  static signInUser = async (payload) => {\r\n    const data = await Api.createRequest('user/login', 'POST', payload)\r\n    return data\r\n  }\r\n\r\n  static fetchAllQueries = async () => {\r\n    const data = await Api.createRequest('user/saved_queries', 'GET');\r\n    return data;\r\n  }\r\n\r\n  static saveQuery = async (payload) => {\r\n    const data = await Api.createRequest('user/save_queries', 'POST', payload);\r\n    return data;\r\n  }\r\n\r\n  static deleteQueries = async (payload) => {\r\n    await Api.createRequest('user/delete_queries', 'POST', payload);\r\n  }\r\n\r\n  static runQueries = async (payload) => {\r\n    const data = await Api.createRequest('user/query_by_id', 'POST', payload);\r\n    return data;\r\n  }\r\n\r\n  static getUserMe = async (payload) => {\r\n    const data = await await Api.createRequest('user/me', 'GET', payload);\r\n    return data;\r\n  }\r\n\r\n  static updateDarkMode = async (payload) => {\r\n    const data = await await Api.createRequest('user/dark_mode', 'POST', payload);\r\n    return data;\r\n  }\r\n\r\n  static searchFriend = async (payload) => {\r\n    const data = await await Api.createRequest(`user/find_profiles?input=${payload}`, 'GET', payload);\r\n    return data;\r\n  }\r\n\r\n  static addFriend = async (payload) => {\r\n    const data = await await Api.createRequest(`user/friends`, 'POST', payload);\r\n    return data;\r\n  }\r\n\r\n  static fetchFriends = async () => {\r\n    const data = await Api.createRequest(`user/friends`, 'GET');\r\n    return data;\r\n  }\r\n\r\n  static getFriendQueries = async (payload) => {\r\n    const data = await Api.createRequest(`user/friend_queries?username=${payload}`, 'GET', payload);\r\n    return data;\r\n  }\r\n\r\n  static shareQueries = async (payload) => {\r\n    const data = await Api.createRequest(`user/share_queries`, 'POST', payload);\r\n    return data;\r\n  }\r\n\r\n  static getSharedQueries = async (payload) => {\r\n    const data = await Api.createRequest(`user/shared_queries`, 'GET', payload);\r\n    return data;\r\n  }\r\n\r\n  static updateIcon = async (payload) => {\r\n    const data = await await Api.createRequest(`user/icon`, 'POST', payload);\r\n    return data;\r\n  }\r\n\r\n  static duplicateQueries = async (payload) => {\r\n    const data = await Api.createRequest(`user/duplicate`, 'POST', payload);\r\n    return data;\r\n  }\r\n}","import { observable, decorate, action } from 'mobx'\r\nimport { PersistenceStore, USER_SESSION } from './PersistenceStore';\r\nimport { Api } from '../network/api/Api'\r\n\r\nclass UserStore {\r\n  user;\r\n  authToken;\r\n  isLoading;\r\n  requestError;\r\n  requestErrorDetail;\r\n  userInfo;\r\n\r\n  get isSignedIn() {\r\n    return (\r\n      this.authToken &&\r\n      this.authToken.length > 0\r\n    )\r\n  }\r\n\r\n  async signUpUser(userCredentials) {\r\n    this.isLoading = true\r\n    try {\r\n      await Api.signUpUser(userCredentials)\r\n      return false;\r\n    } catch (err) {\r\n      this.requestError = true\r\n      this.requestErrorDetail = err.message\r\n    }\r\n    this.isLoading = false\r\n    return true;\r\n  }\r\n\r\n  async loginUser(userCredentials) {\r\n    this.isLoading = true\r\n    try {\r\n      const user = await Api.signInUser(userCredentials)\r\n      this.userInfo = {\r\n        firstName: user.first_name,\r\n        lastName: user.last_name\r\n      }\r\n      this.authToken = user.token\r\n      PersistenceStore.setItem(USER_SESSION, {\r\n        firstName: this.userInfo.firstName,\r\n        lastName: this.userInfo.lastName,\r\n        token: this.authToken\r\n      })\r\n      return false;\r\n    } catch (err) {\r\n      this.requestError = true\r\n      this.requestErrorDetail = err.message\r\n    }\r\n    this.isLoading = false\r\n    return true;\r\n  }\r\n\r\n  resetErrors() {\r\n    this.requestError = false\r\n    this.requestErrorDetail = undefined\r\n  }\r\n\r\n  logout() {\r\n    this.user = undefined\r\n    this.authToken = undefined\r\n    this.userInfo = undefined\r\n    PersistenceStore.clearItem(USER_SESSION)\r\n  }\r\n}\r\n\r\ndecorate(UserStore, {\r\n  user: observable,\r\n  authToken: observable,\r\n  isLoading: observable,\r\n  requestError: observable,\r\n  requestErrorDetail: observable,\r\n  userInfo: observable,\r\n  signUpUser: action,\r\n  loginUser: action,\r\n  resetErrors: action,\r\n  logout: action,\r\n  fetchUser: action\r\n})\r\n\r\nconst userStore = new UserStore()\r\n\r\nexport { userStore as UserStore }","import React from 'react';\r\nimport { Alert, Card, Typography, message } from 'antd';\r\nimport { Form, Input, Button, Checkbox } from 'antd';\r\nimport { UserStore } from '../../stores/UserStore';\r\nimport { withRouter } from 'react-router';\r\nconst { Title } = Typography;\r\n\r\nconst layout = {\r\n  labelCol: { span: 8 },\r\n  wrapperCol: { span: 16 },\r\n};\r\nconst tailLayout = {\r\n  wrapperCol: { offset: 8, span: 16 },\r\n};\r\n\r\nclass LoginPageNoRouter extends React.Component {\r\n  state = {\r\n    loginFailed: false\r\n  }\r\n\r\n  onFinish = async (values) => {\r\n    const loginFailed = await UserStore.loginUser(values);\r\n    if (!loginFailed) {\r\n      message.success(\"Successfully logged in. Welcome!\")\r\n      this.props.history.push('/dashboard')\r\n    }\r\n    this.setState({\r\n      loginFailed\r\n    })\r\n  };\r\n\r\n  onFinishFailed = errorInfo => {\r\n    console.log('Failed:', errorInfo);\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <Card style={{ width: 500 }}>\r\n        <div style={{ margin: 'auto', textAlign: 'center' }}>\r\n          <Title level={2}>Login</Title>\r\n        </div>\r\n        <Form\r\n          {...layout}\r\n          name=\"basic\"\r\n          initialValues={{ remember: true }}\r\n          onFinish={this.onFinish}\r\n          onFinishFailed={this.onFinishFailed}\r\n        >\r\n          {this.state.loginFailed && <Alert style={{ marginBottom: 20 }} message=\"Failed to login\" type=\"error\" />}\r\n          <Form.Item\r\n            label=\"Username\"\r\n            name=\"username\"\r\n            rules={[{ required: true, message: 'Please input your username!' }]}\r\n          >\r\n            <Input />\r\n          </Form.Item>\r\n\r\n          <Form.Item\r\n            label=\"Password\"\r\n            name=\"password\"\r\n            rules={[{ required: true, message: 'Please input your password!' }]}\r\n          >\r\n            <Input.Password />\r\n          </Form.Item>\r\n\r\n          <Form.Item {...tailLayout} valuePropName=\"checked\">\r\n            <Checkbox>Remember me</Checkbox>\r\n          </Form.Item>\r\n\r\n          <Form.Item {...tailLayout}>\r\n            <Button type=\"primary\" htmlType=\"submit\">\r\n              Login\r\n        </Button>\r\n          </Form.Item>\r\n        </Form>\r\n      </Card>\r\n    );\r\n  }\r\n}\r\n\r\nconst LoginPageWithRouter = withRouter(LoginPageNoRouter);\r\n\r\nexport { LoginPageWithRouter as LoginPage }","import React from 'react';\r\nimport { Alert, Card, Typography, message } from 'antd';\r\nimport { Form, Input, Button, Checkbox } from 'antd';\r\nimport { UserStore } from '../../stores/UserStore';\r\nimport { withRouter } from 'react-router-dom'\r\n\r\nconst { Title } = Typography;\r\n\r\nconst layout = {\r\n  labelCol: { span: 8 },\r\n  wrapperCol: { span: 16 },\r\n};\r\nconst tailLayout = {\r\n  wrapperCol: { offset: 8, span: 16 },\r\n};\r\n\r\nclass RegisterPageNoRouter extends React.Component {\r\n  state = {\r\n    registerFailed: false,\r\n\r\n  }\r\n  onFinish = async values => {\r\n    const registerFailed = await UserStore.signUpUser(values);\r\n    if (!registerFailed) {\r\n      message.success(\"Successfully registered!\")\r\n      this.props.history.push('/login');\r\n    }\r\n    this.setState({\r\n      registerFailed\r\n    })\r\n  };\r\n\r\n  onFinishFailed = errorInfo => {\r\n    console.log('Failed:', errorInfo);\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <Card style={{ width: 500 }}>\r\n        <div style={{ margin: 'auto', textAlign: 'center' }}>\r\n          <Title level={2}>Register</Title>\r\n        </div>\r\n        <Form\r\n          {...layout}\r\n          name=\"basic\"\r\n          initialValues={{ remember: true }}\r\n          onFinish={this.onFinish}\r\n          onFinishFailed={this.onFinishFailed}\r\n        >\r\n          {this.state.registerFailed && <Alert style={{ marginBottom: 20 }} message=\"Failed to register\" type=\"error\" />}\r\n          <Form.Item\r\n            label=\"Username\"\r\n            name=\"username\"\r\n            rules={[{ required: true, message: 'Please input your username!' }]}\r\n          >\r\n            <Input />\r\n          </Form.Item>\r\n\r\n          <Form.Item\r\n            label=\"First Name\"\r\n            name=\"first_name\"\r\n            rules={[{ required: true, message: 'Please input your first name!' }]}\r\n          >\r\n            <Input />\r\n          </Form.Item>\r\n\r\n          <Form.Item\r\n            label=\"Last Name\"\r\n            name=\"last_name\"\r\n            rules={[{ required: true, message: 'Please input your last name!' }]}\r\n          >\r\n            <Input />\r\n          </Form.Item>\r\n\r\n          <Form.Item\r\n            label=\"Password\"\r\n            name=\"password\"\r\n            rules={[{ required: true, message: 'Please input your password!' }]}\r\n          >\r\n            <Input.Password />\r\n          </Form.Item>\r\n\r\n          <Form.Item {...tailLayout}>\r\n            <Button type=\"primary\" htmlType=\"submit\">\r\n              Register\r\n        </Button>\r\n          </Form.Item>\r\n        </Form>\r\n      </Card>\r\n    );\r\n  }\r\n}\r\n\r\nconst RegisterPageWithRouter = withRouter(RegisterPageNoRouter);\r\n\r\nexport { RegisterPageWithRouter as RegisterPage }","import React from 'react';\r\nimport { Menu } from 'antd';\r\nimport { MailOutlined, AppstoreOutlined, SettingOutlined } from '@ant-design/icons';\r\nimport {\r\n  BrowserRouter as Router,\r\n  Switch,\r\n  Route,\r\n  Link\r\n} from \"react-router-dom\";\r\nimport styled from 'styled-components';\r\n\r\nconst { SubMenu } = Menu;\r\n\r\nconst RightContainer = styled.div`\r\n  float: right;\r\n`\r\n\r\nexport class TopNavigationBar extends React.Component {\r\n  state = {\r\n    current: 'mail',\r\n  };\r\n\r\n  handleClick = e => {\r\n    console.log('click ', e);\r\n    this.setState({\r\n      current: e.key,\r\n    });\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <RightContainer>\r\n        <Menu onClick={this.handleClick} selectedKeys={[this.state.current]} mode=\"horizontal\">\r\n          <Menu.Item\r\n            key=\"home\">\r\n            <Link to=\"/\">\r\n              Home\r\n        </Link></Menu.Item>\r\n          <Menu.Item\r\n            key=\"register\">\r\n            <Link to=\"/register\">\r\n              Register\r\n        </Link>\r\n          </Menu.Item>\r\n          <Menu.Item key=\"sigin\">\r\n            <Link to=\"/login\">\r\n              Sign In\r\n        </Link>\r\n          </Menu.Item>\r\n        </Menu>\r\n      </RightContainer>\r\n    );\r\n  }\r\n}","import React, { useState } from 'react';\r\nimport { Modal, Form, Input, Table, Radio, Select, Slider, InputNumber, AutoComplete } from 'antd';\r\nimport { Api } from '../../../network/api/Api';\r\nconst { Option } = Select;\r\n\r\n\r\nexport const ShareQueryModal = ({\r\n  queries,\r\n  visible,\r\n  onCreate,\r\n  onCancel,\r\n}) => {\r\n    const [value, setValue] = useState('');\r\n    const [friendsVal, setFriendsVal] = useState([]);\r\n    const [entries, setEntries] = useState([]);\r\n\r\n    function handleChange(value){\r\n        setValue(value);\r\n    }\r\n    const onSelect = async (data) => {\r\n        const username = data.split(\":\")[0];\r\n        setFriendsVal([...friendsVal, {username}])\r\n        setValue('')\r\n      };\r\n  \r\n      const onSearch = async (searchText) => {\r\n        const friends = await Api.fetchFriends();\r\n        setEntries(friends.map(obj => `${obj.username}: ${obj.firstName} ${obj.lastName}`));\r\n    }\r\n\r\n  return (\r\n    <Modal\r\n      visible={visible}\r\n      title=\"Share Queries\"\r\n      okText=\"Share\"\r\n      cancelText=\"Cancel\"\r\n      onCancel={() => {\r\n          onCancel();\r\n          setEntries([])\r\n          setValue('')\r\n          setFriendsVal([])\r\n        }\r\n    }\r\n      onOk={() => {\r\n        console.log(\"test\")\r\n        console.log(queries)\r\n        const result = [];\r\n        for(let i = 0; i < queries.length; ++i){\r\n            for(let j = 0; j < friendsVal.length; ++j){\r\n                result.push({\r\n                    \"username\": friendsVal[j].username,\r\n                    \"qid\": queries[i]\r\n                });\r\n            }\r\n        }\r\n        onCreate(result)\r\n        setEntries([])\r\n        setValue('')\r\n        setFriendsVal([])\r\n      }}\r\n    >\r\n        <div style={{ display: 'flex', width: '100%' }}>\r\n          <AutoComplete\r\n            value={value}\r\n            onChange={handleChange}\r\n            options={entries.map(value => { return { value }; })}\r\n            style={{ width: '100%', justifyContent: 'center', margin: '0 auto', display: 'block' }}\r\n            onSelect={onSelect}\r\n            onSearch={onSearch}\r\n          >\r\n            <Input.Search size=\"large\" placeholder=\"input here\" enterButton />\r\n          </AutoComplete>\r\n        </div>\r\n        <Table columns={  [\r\n    {\r\n      title: 'Username',\r\n      dataIndex: 'username',\r\n      key: 'username',\r\n    }]} dataSource={friendsVal.map((friend, i) => {\r\n          return {\r\n            id: i,\r\n            username: friend.username,\r\n          }\r\n        })} />\r\n      \r\n    </Modal>\r\n  );\r\n};\r\n","import React, { useState } from 'react';\r\nimport { Modal, Form, Input, Radio, Select, Slider, InputNumber } from 'antd';\r\n\r\nconst { Option } = Select;\r\n\r\n\r\nexport const CreateSearchQueryModal = ({\r\n  isCreate,\r\n  visible,\r\n  onCreate,\r\n  onCancel,\r\n  query\r\n}) => {\r\n  const [databaseVal, setDatabaseVal] = useState(0);\r\n\r\n  const [form] = Form.useForm();\r\n  function handleChange(value){\r\n    setDatabaseVal(value);\r\n  }\r\n\r\n  const updateValues = () =>{\r\n    // could try making for loop \r\n    if(query && typeof form.getFieldsValue().database === 'undefined'){\r\n      form.setFieldsValue({\r\n        database: query.database\r\n      })\r\n    } if(query && typeof form.getFieldsValue().employment === 'undefined'){\r\n      form.setFieldsValue({\r\n        employment: query.employment\r\n      })\r\n    } if(query && typeof form.getFieldsValue().income === 'undefined'){\r\n      form.setFieldsValue({\r\n        income: query.income\r\n      })\r\n    } if(query && typeof form.getFieldsValue().education === 'undefined'){\r\n      form.setFieldsValue({\r\n        education: query.education\r\n      })\r\n    } if(query && typeof form.getFieldsValue().sex === 'undefined'){\r\n      form.setFieldsValue({\r\n        sex: query.sex\r\n      })\r\n    } if(query && typeof form.getFieldsValue().age === 'undefined'){\r\n      form.setFieldsValue({\r\n        age: query.age\r\n      })\r\n    }\r\n  }\r\n  React.useEffect(() => {\r\n    if(query){\r\n      setDatabaseVal(query.database);\r\n      form.setFieldsValue({\r\n        database: query.database,\r\n        employment: query.employment,\r\n        income: query.income,\r\n        education: query.education,\r\n        sex: query.sex,\r\n        age: query.age\r\n      });\r\n    }\r\n  }, []);\r\n\r\n  return (\r\n    <Modal\r\n      visible={visible}\r\n      title={isCreate ? \"Create search query\" : \"Edit search query\"}\r\n      okText=\"Create\"\r\n      cancelText=\"Cancel\"\r\n      onCancel={onCancel}\r\n      onOk={() => {\r\n        updateValues();\r\n        form\r\n          .validateFields()\r\n          .then(values => {\r\n            form.resetFields();\r\n            onCreate(values);\r\n          })\r\n          .catch(info => {\r\n            console.log('Validate Failed:', info);\r\n          });\r\n      }}\r\n    >\r\n      <Form\r\n        form={form}\r\n        layout=\"vertical\"\r\n        name=\"form_in_modal\"\r\n      >\r\n        <Form.Item\r\n          name=\"database\"\r\n          label=\"Database\"\r\n          rules={[{ required: true }]}\r\n        >\r\n          <Select\r\n            showSearch\r\n            style={{ width: '100%' }}\r\n            placeholder=\"Select a database\"\r\n            defaultValue={query && query.database}\r\n            value={query && query.database}\r\n            onChange={handleChange}\r\n          >\r\n            <Option value=\"education\">Education</Option>\r\n            <Option value=\"employment\">Employment</Option>\r\n            <Option value=\"income\">Income</Option>\r\n            <Option value=\"population\">Population</Option>\r\n          </Select>\r\n        </Form.Item>\r\n        {databaseVal == \"employment\" ? (<Form.Item\r\n          name=\"employment\"\r\n          label=\"Employment\"\r\n          rules={[{ required: false }]}\r\n        >\r\n        <Select\r\n            showSearch\r\n            mode=\"multiple\"\r\n            style={{ width: '100%' }}\r\n            placeholder=\"Select type of employment\"\r\n            defaultValue={query && query.employment || []}\r\n            value={query && query.employment|| []}\r\n          >\r\n            <Option value=\"employed\">Employed</Option>\r\n            <Option value=\"unemployed\">Unemployed</Option>\r\n          </Select>\r\n        </Form.Item>\r\n        ) : null}\r\n        {databaseVal == \"income\" ? (<Form.Item\r\n          name=\"income\"\r\n          label=\"Income\"\r\n          rules={[{ required: false }]}\r\n        >\r\n        <Select\r\n            showSearch\r\n            mode=\"multiple\"\r\n            style={{ width: '100%' }}\r\n            placeholder=\"Select type of income\"\r\n            defaultValue={query && query.income || []}\r\n            value={query && query.income|| []}\r\n          >\r\n            <Option value=\"market income\">Market income</Option>\r\n            <Option value=\"employment income\">Employment income</Option>\r\n            <Option value=\"wages, salaries and commissions\">Wages, salaries and commissions</Option>\r\n            <Option value=\"net self-employment income\">Net self-employment income</Option>\r\n            <Option value=\"investment income\">Investment income</Option>\r\n            <Option value=\"private retirement income\">Private retirement income</Option>\r\n            <Option value=\"market income not included elsewhere\">Market income not included elsewhere</Option>\r\n            <Option value=\"government transfers\">Government transfers</Option>\r\n            <Option value=\"OAS and GIS\">OAS and GIS</Option>\r\n            <Option value=\"CPP and QPP\">CPP and QPP</Option>\r\n            <Option value=\"EI benefits\">EI benefits</Option>\r\n            <Option value=\"child benefits\">Child benefits</Option>\r\n            <Option value=\"other government transfers\">Other government transfers</Option>\r\n            <Option value=\"after-tax income\">After-tax income</Option>\r\n            <Option value=\"income taxes\">Income taxes</Option>\r\n          </Select>\r\n        </Form.Item>\r\n        ) : null}\r\n        {databaseVal == \"education\" ? (<Form.Item\r\n          name=\"education\"\r\n          label=\"Education\"\r\n          rules={[{ required: false }]}\r\n        >\r\n        <Select\r\n            showSearch\r\n            mode=\"multiple\"\r\n            style={{ width: '100%' }}\r\n            placeholder=\"Select level of education\"\r\n            defaultValue={query && query.education || []}\r\n            value={query && query.education|| []}\r\n          >\r\n            <Option value=\"no certificate, diploma or degree\">No certificate, diploma or degree</Option>\r\n            <Option value=\"secondary (high) school diploma or equivalency certificate\">Secondary (high) school diploma or equivalency certificate</Option>\r\n            <Option value=\"postsecondary certificate, diploma or degree\">Postsecondary certificate, diploma or degree</Option>\r\n            <Option value=\"apprenticeship or trades certificate or diploma\">Apprenticeship or trades certificate or diploma</Option>\r\n            <Option value=\"trades certificate or diploma other than Certificate of Apprenticeship or Certificate of Qualification\">Trades certificate or diploma other than Certificate of Apprenticeship or Certificate of Qualification</Option>\r\n            <Option value=\"certificate of Apprenticeship or Certificate of Qualification\">Certificate of Apprenticeship or Certificate of Qualification</Option>\r\n            <Option value=\"college, CEGEP or other non-university certificate or diploma\">College, CEGEP or other non-university certificate or diploma</Option>\r\n            <Option value=\"university certificate or diploma below bachelor level\">University certificate or diploma below bachelor level</Option>\r\n            <Option value=\"university certificate, diploma or degree at bachelor level or above\">University certificate, diploma or degree at bachelor level or above</Option>\r\n            <Option value=\"bachelor's degree\">Bachelor's degree</Option>\r\n            <Option value=\"university certificate or diploma above bachelor level\">University certificate or diploma above bachelor level</Option>\r\n            <Option value=\"degree in medicine, dentistry, veterinary medicine or optometry\">Degree in medicine, dentistry, veterinary medicine or optometry</Option>\r\n            <Option value=\"master's degree\">Master's degree</Option>\r\n            <Option value=\"earned doctorate\">Earned doctorate</Option>\r\n          </Select>\r\n        </Form.Item>\r\n        ) : null}\r\n        <Form.Item\r\n          name=\"sex\"\r\n          label=\"Sex Constraint\"\r\n          rules={[{ required: false }]}\r\n        >\r\n          <Select\r\n            showSearch\r\n            mode=\"multiple\"\r\n            style={{ width: '100%' }}\r\n            placeholder=\"Select a sex\"\r\n            defaultValue={query && query.sex || [\"male\", \"female\"]}\r\n            optionFilterProp=\"male\"\r\n            value={query && query.sex || [\"male\", \"female\"]}\r\n          >\r\n            <Option value=\"male\">Male</Option>\r\n            <Option value=\"female\">Female</Option>\r\n          </Select>\r\n        </Form.Item>\r\n        <Form.Item\r\n          name=\"age\"\r\n          label=\"Age Constraint\"\r\n          rules={[{ required: false }]}\r\n        >\r\n          <Select\r\n            showSearch\r\n            mode=\"multiple\"\r\n            style={{ width: '100%' }}\r\n            placeholder=\"Select age intervals\"\r\n            defaultValue={query && query.age || []}\r\n            value={query && query.age || []}\r\n          >\r\n            <Option value=\"15-24\">15-24</Option>\r\n            <Option value=\"25-34\">25-34</Option>\r\n            <Option value=\"35-44\">35-44</Option>\r\n            <Option value=\"45-54\">45-54</Option>\r\n            <Option value=\"55-64\">55-64</Option>\r\n            <Option value=\"65+\">65+</Option>\r\n          </Select>\r\n        </Form.Item>\r\n      </Form>\r\n    </Modal>\r\n  );\r\n};\r\n","import React, { Component } from 'react';\r\n\r\nexport class Legend extends React.Component {\r\n\r\n    render() {\r\n        const { minimum, maximum, color, units, queryId } = this.props;\r\n        let entries = []\r\n        const scale = (maximum - minimum)/4;\r\n        for (let i = maximum; i >= 0; i -= scale) {\r\n            if (units != 'people') {\r\n                entries.push(i.toFixed(2));\r\n            }\r\n            else {\r\n                entries.push(Math.round(i));\r\n            }\r\n        }\r\n        return (\r\n        <div className=\"floatleft\">\r\n            <h4><span style={{backgroundColor: color}}></span>{'Query ' + queryId}</h4>\r\n            <div id=\"state-legend\" className=\"legend\">\r\n                {entries.map((value, idx) => (\r\n                    <h4><span style={{backgroundColor: color, opacity: (entries.length - idx)/entries.length}}></span>{value}</h4>\r\n                ))}\r\n            </div>\r\n            <p id=\"legend-units\">{'All values in ' + units}</p>\r\n        </div>\r\n        )\r\n    }\r\n}","import React, { Component } from 'react';\r\nimport './editor.css';\r\nimport BezierEditor from \"bezier-easing-editor\";\r\nimport {Button, Radio, Select} from \"antd\";\r\nimport {UserStore} from \"../../stores/UserStore\";\r\n\r\nexport class VisualQueryEditor extends Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            curve: [0, 0, 1, 1],\r\n            color: null,\r\n            selected: null\r\n        };\r\n    }\r\n\r\n    componentWillReceiveProps(nextProps, nextContext) {\r\n        // if selected is null, set to first one\r\n        if(!this.state.selected && nextProps.queries.length !== 0) {\r\n            this.setState({selected: nextProps.queries[0].qid})\r\n            // TODO: update curves\r\n        } else if(this.state.selected && nextProps.queries.length === 0) {\r\n            this.setState({selected: null})\r\n        }\r\n    }\r\n\r\n    makeNewColors(c) {\r\n        let r = c[0];\r\n        let g = c[1];\r\n        let b = c[2];\r\n        // let r = 0, g = 0, b = 0;\r\n        return [\r\n            \"interpolate\",\r\n            [\"linear\"],\r\n            [\"heatmap-density\"],\r\n            0,\r\n            `rgba(${r},${g},${b},0)`,\r\n            0.2,\r\n                `rgba(${r},${g},${b},0.2)`,\r\n            0.4,\r\n                `rgba(${r},${g},${b},0.4)`,\r\n            0.6,\r\n                `rgba(${r},${g},${b},0.6)`,\r\n            0.8,\r\n                `rgba(${r},${g},${b},0.8)`,\r\n            0.9,\r\n                `rgba(${r},${g},${b},1)`,\r\n        ];\r\n    }\r\n\r\n    componentWillUpdate(nextProps, nextState, nextContext) {\r\n        // update curve on new selected query\r\n        if(this.state.selected !== nextState.selected) {\r\n            // update curve and color\r\n            if(nextState.selected) {\r\n                let dtos = this.props.dtos;\r\n                let index = dtos.findIndex((e) => e.query.qid === nextState.selected);\r\n                let q = dtos[index].query;\r\n                console.log(\"selected\");\r\n                console.log(q);\r\n                // fetch from query\r\n                this.setState({\r\n                    color: q.color,\r\n                    curve: (q.curve) ? q.curve : [0, 0, 1, 1]\r\n                })\r\n            } else {\r\n                // nothing selected; null out\r\n                this.setState({\r\n                    color: null,\r\n                    curve: [0, 0, 1, 1]\r\n                })\r\n            }\r\n        }\r\n    }\r\n\r\n    colors = [\r\n        [69, 195, 229],\r\n        [229, 181, 69],\r\n        [184, 69, 229],\r\n        [147, 229, 69],\r\n        [229, 93, 69],\r\n        [229, 138, 69],\r\n        [69, 229, 203]\r\n    ];\r\n\r\n    changeColor = (colorIndex) => {\r\n        if(this.state.selected) {\r\n            this.setState({color: colorIndex});\r\n            let q = this.props.queries;\r\n            let index = q.findIndex((e) => e.qid === this.state.selected);\r\n            q[index].heatmap.paint[\"heatmap-color\"] = this.makeNewColors(this.colors[colorIndex]);\r\n            q[index].selected = false;\r\n            q[index].postSelect = true;\r\n            this.props.onColorChange(this.state.selected, colorIndex);\r\n            this.props.onChange(q);\r\n        }\r\n    };\r\n\r\n    changeCurve = (curve) => {\r\n        if(this.state.selected) {\r\n            this.setState({curve: curve});\r\n\r\n\r\n            let q = this.props.queries;\r\n            let index = q.findIndex((e) => e.qid === this.state.selected);\r\n\r\n            const max = (a, b) => {if(a > b) return a; else return b;};\r\n            const min = (a, b) => {if(a < b) return a; else return b;};\r\n\r\n            const mag = q[index].heatmap.paint[\"heatmap-weight\"][5];\r\n            const weight = [\"interpolate\", [\"cubic-bezier\", max(curve[0], 0), min(curve[1], 1), max(curve[2], 0), min(curve[3], 1)], [\"get\", \"mag\"], 0, 0, mag, 1];\r\n\r\n            q[index].heatmap.paint[\"heatmap-weight\"] = weight;\r\n            q[index].selected = false;\r\n            q[index].postSelect = true;\r\n            this.props.onChange(q);\r\n        }\r\n\r\n    };\r\n\r\n    resetCurve = () => {\r\n      this.changeCurve([0, 0, 1, 1]);\r\n    };\r\n\r\n    save = () => {\r\n        if(this.state.selected) {\r\n            let dtos = this.props.dtos;\r\n            let index = dtos.findIndex((e) => e.query.qid === this.state.selected);\r\n            let query = dtos[index].query;\r\n            query.color = this.state.color;\r\n            query.curve = this.state.curve;\r\n            this.props.onSaveDto(query);\r\n        }\r\n    };\r\n\r\n    render() {\r\n        return (\r\n            <div className=\"editor-base\">\r\n                <h3>Edit query visuals</h3>\r\n                <span>Query</span>\r\n                <Select value={this.state.selected} onChange={val => this.setState({selected: val})}>\r\n                    {\r\n                        this.props.queries.map(q => (\r\n                            <Select.Option value={q.qid}>\r\n                                Query {q.qid}\r\n                            </Select.Option>\r\n                        ))\r\n                    }\r\n                </Select>\r\n                <span>Color</span>\r\n                <Radio.Group style={{display: \"inline-flex\", direction: \"row\"}} value={this.state.color} onChange={ev => this.changeColor(ev.target.value)}>\r\n                    <Radio.Button value={0} style={{padding: 0}}><div className=\"swatch1\"/></Radio.Button>\r\n                    <Radio.Button value={1} style={{padding: 0}}><div className=\"swatch2\"/></Radio.Button>\r\n                    <Radio.Button value={2} style={{padding: 0}}><div className=\"swatch3\"/></Radio.Button>\r\n                    <Radio.Button value={3} style={{padding: 0}}><div className=\"swatch4\"/></Radio.Button>\r\n                    <Radio.Button value={4} style={{padding: 0}}><div className=\"swatch5\"/></Radio.Button>\r\n                    <Radio.Button value={5} style={{padding: 0}}><div className=\"swatch6\"/></Radio.Button>\r\n                </Radio.Group>\r\n                <span>Data curve</span>\r\n                <BezierEditor className=\"editor\" value={this.state.curve}\r\n                              onChange={val => this.changeCurve(val)}\r\n                              width={200}\r\n                              height={200}\r\n                              handleColor=\"#1890ff\"\r\n\r\n                />\r\n                <Button onClick={this.resetCurve} style={{marginBottom: 8, marginTop: 4}}>Reset Curve</Button>\r\n                <Button type=\"primary\" onClick={this.save}>Save</Button>\r\n            </div>\r\n        );\r\n    }\r\n}","import React, { Component } from 'react';\r\nimport ReactMapGL, { Source, Layer } from 'react-map-gl';\r\nimport { heatmapLayer } from './map-style';\r\nimport { List, Layout, Typography, Button, Checkbox } from 'antd';\r\nimport {\r\n  PlusOutlined,\r\n  DeleteOutlined,\r\n  EditOutlined,\r\n  SearchOutlined,\r\n  ShareAltOutlined as ShareOutlined\r\n} from '@ant-design/icons'\r\nimport { UserStore } from '../../stores/UserStore';\r\nimport { ShareQueryModal } from './modal/ShareQueryModal';\r\nimport { CreateSearchQueryModal } from './modal/CreateSearchQueryModal';\r\nimport { queries } from '@testing-library/react';\r\nimport { Api } from '../../network/api/Api';\r\nimport { Legend } from './Legend';\r\nimport './app.css';\r\nimport {VisualQueryEditor} from \"./VisualQueryEditor\";\r\n\r\nconst { Sider, Content } = Layout;\r\nconst { Title } = Typography;\r\n\r\n\r\nconst educationLUT = {\r\n  1: \"total education\",\r\n  2: \"no certificate, diploma or degree\",\r\n  3: \"secondary (high) school diploma or equivalency certificate\",\r\n  4: \"postsecondary certificate, diploma or degree\",\r\n  5: \"apprenticeship or trades certificate or diploma\",\r\n  6: \"trades certificate or diploma other than Certificate of Apprenticeship or Certificate of Qualification\",\r\n  7: \"certificate of Apprenticeship or Certificate of Qualification\",\r\n  8: \"college, CEGEP or other non-university certificate or diploma\",\r\n  9: \"university certificate or diploma below bachelor level\",\r\n  10: \"university certificate, diploma or degree at bachelor level or above\",\r\n  11: \"bachelor's degree\",\r\n  12: \"university certificate or diploma above bachelor level\",\r\n  13: \"degree in medicine, dentistry, veterinary medicine or optometry\",\r\n  14: \"master's degree\",\r\n  15: \"earned doctorate\",\r\n}\r\n\r\nconst educationLUTReverse = {\r\n  \"total education\": 1,\r\n  \"no certificate, diploma or degree\": 2,\r\n  \"secondary (high) school diploma or equivalency certificate\": 3,\r\n  \"postsecondary certificate, diploma or degree\": 4,\r\n  \"apprenticeship or trades certificate or diploma\": 5,\r\n  \"trades certificate or diploma other than Certificate of Apprenticeship or Certificate of Qualification\": 6,\r\n  \"certificate of Apprenticeship or Certificate of Qualification\": 7,\r\n  \"college, CEGEP or other non-university certificate or diploma\": 8,\r\n  \"university certificate or diploma below bachelor level\": 9,\r\n  \"university certificate, diploma or degree at bachelor level or above\": 10,\r\n  \"bachelor's degree\": 11,\r\n  \"university certificate or diploma above bachelor level\": 12,\r\n  \"degree in medicine, dentistry, veterinary medicine or optometry\": 13,\r\n  \"master's degree\": 14,\r\n  \"earned doctorate\": 15,\r\n}\r\n\r\nconst incomeLUT = {\r\n  1: \"total income\",\r\n  2: \"market income\",\r\n  3: \"employment income\",\r\n  4: \"wages, salaries and commissions\",\r\n  5: \"net self-employment income\",\r\n  6: \"investment income\",\r\n  7: \"private retirement income\",\r\n  8: \"market income not included elsewhere\",\r\n  9: \"government transfers\",\r\n  10: \"OAS and GIS\",\r\n  11: \"CPP and QPP\",\r\n  12: \"EI benefits\",\r\n  13: \"child benefits\",\r\n  14: \"other government transfers\",\r\n  15: \"after-tax income\",\r\n  16: \"income taxes\"\r\n};\r\n\r\nconst incomeLUTReverse = {\r\n  \"total income\": 1,\r\n  \"market income\": 2,\r\n  \"employment income\": 3,\r\n  \"wages, salaries and commissions\": 4,\r\n  \"net self-employment income\": 5,\r\n  \"investment income\": 6,\r\n  \"private retirement income\": 7,\r\n  \"market income not included elsewhere\": 8,\r\n  \"government transfers\": 9,\r\n  \"OAS and GIS\": 10,\r\n  \"CPP and QPP\": 11,\r\n  \"EI benefits\": 12,\r\n  \"child benefits\": 13,\r\n  \"other government transfers\": 14,\r\n  \"after-tax income\": 15,\r\n  \"income taxes\": 16\r\n};\r\n\r\nconst sexLUT = {\r\n  1: \"malefemale\",\r\n  2: \"male\",\r\n  3: \"female\"\r\n};\r\n\r\nconst sexLUTReverse = {\r\n  \"malefemale\": 1,\r\n  \"male\": 2,\r\n  \"female\": 3\r\n};\r\n\r\nconst ageLUT = {\r\n  1: \"all\",\r\n  2: \"15-24\",\r\n  5: \"25-34\",\r\n  6: \"35-44\",\r\n  7: \"45-54\",\r\n  8: \"55-64\",\r\n  9: \"65+\"\r\n}\r\n\r\nconst ageLUTReverse = {\r\n  \"all\": 1,\r\n  \"15-24\": 2,\r\n  \"25-34\": 5,\r\n  \"35-44\": 6,\r\n  \"45-54\": 7,\r\n  \"55-64\": 8,\r\n  \"65+\": 9\r\n}\r\n\r\nconst employmentLUT = {\r\n  1: \"employed\",\r\n  2: \"unemployed\"\r\n}\r\n\r\nconst employmentLUTReverse = {\r\n  \"employed\": 1,\r\n  \"unemployed\": 2\r\n}\r\n\r\n\r\nexport class Map extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    const current = new Date().getTime();\r\n    this.state = {\r\n      viewport: {\r\n        latitude: 43.4643,\r\n        longitude: -80.5204,\r\n        zoom: 8,\r\n        maxZoom: 8.4,\r\n      },\r\n      selectedTime: current,\r\n      modalVisible: false,\r\n      mapStyle: '',\r\n      queries: [],\r\n      sharedQueries: [],\r\n      queryResults: [],\r\n      isLoading: false,\r\n      username: '',\r\n      shareModalVisible: false\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.fetchData();\r\n    this.setMapStyle();\r\n  }\r\n\r\n  async setMapStyle() {\r\n    const userInfo = await Api.getUserMe();\r\n    if (userInfo && userInfo.dark_mode) {\r\n      this.setState({ mapStyle: \"mapbox://styles/mapbox/dark-v9\", username: userInfo.user_name })\r\n    } else {\r\n      this.setState({ mapStyle: \"mapbox://styles/mapbox/light-v9\", username: userInfo.user_name })\r\n    }\r\n  }\r\n\r\n  async fetchData() {\r\n    const userQueries = await Api.fetchAllQueries();\r\n    const sharedQueries = await Api.getSharedQueries();\r\n    console.log(\"ETSTETSET\")\r\n    console.log(sharedQueries)\r\n    const apiQueries = [...userQueries, ...sharedQueries];\r\n    let queries = [];\r\n    for (let i = 0; i < apiQueries.length; ++i) {\r\n      const apiQuery = apiQueries[i];\r\n      const education = [];\r\n      const income = [];\r\n      const employment = [];\r\n      const age = [];\r\n      if (!(apiQuery.params.length === 1 && apiQuery.params[0] === 1)) {\r\n        if (apiQuery.dataset === \"education\") {\r\n\r\n          for (let j = 0; j < apiQuery.params.length; ++j) {\r\n            education.push(educationLUT[apiQuery.params[j]]);\r\n          }\r\n        } else if (apiQuery.dataset === \"employment\") {\r\n          for (let j = 0; j < apiQuery.params.length; ++j) {\r\n            employment.push(employmentLUT[apiQuery.params[j]]);\r\n          }\r\n        } else if (apiQuery.dataset === \"income\") {\r\n          for (let j = 0; j < apiQuery.params.length; ++j) {\r\n            income.push(incomeLUT[apiQuery.params[j]]);\r\n          }\r\n        }\r\n      }\r\n      const sex = apiQuery.sex && apiQuery.sex !== 1 ? [sexLUT[apiQuery.sex]] : [\"male\", \"female\"];\r\n      if (apiQuery.age) {\r\n        for (let j = 0; j < apiQuery.age.length; ++j) {\r\n          if (apiQuery.age[j] !== 1) {\r\n            age.push(ageLUT[apiQuery.age[j]]);\r\n          }\r\n        }\r\n      }\r\n      const query = {\r\n        qid: apiQuery.qid,\r\n        database: apiQuery.dataset,\r\n        education: education,\r\n        income: income,\r\n        employment: employment,\r\n        sex: sex,\r\n        age: age,\r\n        color: apiQuery.color,\r\n        curve: apiQuery.curve\r\n      };\r\n      const queryWrapper = {\r\n        \"query\": query,\r\n        \"selected\": false,\r\n        \"modalVisible\": false\r\n      };\r\n\r\n      queries.push(queryWrapper);\r\n    }\r\n    this.setState({ queries: queries });\r\n  }\r\n\r\n  async addQueryToBuilder(values) {\r\n    const oldQueries = this.state.queries;\r\n    const query = {\r\n      \"query\": values,\r\n      \"selected\": false,\r\n      \"modalVisible\": false\r\n    };\r\n    if (this.queryExists(query, -1) === -1) {\r\n      // need to save query id\r\n      const qid = await this.saveQuery(query.query);\r\n      query.query.qid = qid[0];\r\n      oldQueries.push(query);\r\n    }\r\n    this.setState({\r\n      modalVisible: false,\r\n      queries: oldQueries\r\n    })\r\n  }\r\n\r\n  async copyQueries() {\r\n    const queries = this.state.queries;\r\n    let result = '';\r\n    let firstSelected = true\r\n    for(let i = 0; i < queries.length; ++i){\r\n      if(queries[i].selected){\r\n        if(firstSelected) {\r\n          firstSelected = !firstSelected;\r\n          result += queries[i].query.qid\r\n        } else {\r\n          result += \", \" + queries[i].query.qid\r\n        }\r\n      }\r\n    }\r\n    const message = \"Select \" + result + \" from \" + this.state.username \r\n    navigator.clipboard.writeText(message)\r\n  }\r\n\r\n  saveDto = async (query) => {\r\n    console.log(query);\r\n    // push to API\r\n    const ret = await this.saveQuery(query);\r\n    console.log(ret);\r\n    if(ret) {\r\n      let q = this.state.queries;\r\n      // push to memory\r\n      const index = q.findIndex((e) => e.query.qid === query.qid);\r\n      q[index].query = query;\r\n      this.setState({\r\n        queries: q\r\n      })\r\n    }\r\n  };\r\n\r\n  async saveQuery(query) {\r\n    const params = [];\r\n    if (query.database === \"education\") {\r\n      if (!query.education || query.education.length === 0 || query.education.length === 14) {\r\n        params.push(1);\r\n      } else {\r\n        for (let i = 0; i < query.education.length; ++i) {\r\n          params.push(educationLUTReverse[query.education[i]]);\r\n        }\r\n      }\r\n    } else if (query.database === \"employment\") {\r\n      if (!query.employment || query.employment.length === 0 || query.employment.length === 2) {\r\n        params.push(1);\r\n        params.push(2);\r\n      } else {\r\n        // length will be 1\r\n        params.push(employmentLUTReverse[query.employment[0]]);\r\n      }\r\n    } else if (query.database === \"income\") {\r\n      if (!query.income || query.income.length === 0 || query.income.length === 14) {\r\n        params.push(1);\r\n      } else {\r\n        for (let i = 0; i < query.income.length; ++i) {\r\n          params.push(incomeLUTReverse[query.income[i]]);\r\n        }\r\n      }\r\n    }\r\n\r\n    const apiQuery = [{\r\n      \"dataset\": query.database,\r\n      \"params\": params\r\n    }];\r\n\r\n    if (query.age && query.age.length > 1) {\r\n      const age = [];\r\n      for (let i = 0; i < query.age.length; ++i) {\r\n        age.push(ageLUTReverse[query.age[i]]);\r\n      }\r\n      apiQuery[0].age = age;\r\n    }\r\n    else apiQuery[0].age = [1];\r\n    if (query.sex && query.sex.length == 1) {\r\n      apiQuery[0].sex = sexLUTReverse[query.sex[0]];\r\n    } else apiQuery[0].sex = 1;\r\n    if (query.qid) {\r\n      apiQuery[0].qid = query.qid;\r\n    }\r\n    if(query.color) {\r\n      apiQuery[0].color = query.color;\r\n    }\r\n    if(query.curve) {\r\n      apiQuery[0].curve = query.curve;\r\n    }\r\n    return await Api.saveQuery(apiQuery);\r\n  }\r\n\r\n  async deleteQueries() {\r\n    const queries = this.state.queries;\r\n    const queriesToDelete = [];\r\n    let size = queries.length;\r\n    for (let i = 0; i < size; ++i) {\r\n      if (queries[i].selected) {\r\n        queriesToDelete.push(queries[i].query.qid);\r\n        queries.splice(i, 1);\r\n        --i;\r\n        --size;\r\n      }\r\n    }\r\n    this.setState({ queries: queries });\r\n    await this.deleteQueriesAPI(queriesToDelete);\r\n  }\r\n\r\n  async deleteQueriesAPI(qids) {\r\n    await Api.deleteQueries(qids);\r\n  }\r\n\r\n  async runQueries() {\r\n    this.setState({ queryResults: [], isLoading: true });\r\n    const queriesToRun = this.queriesSelected();\r\n    const result = await Api.runQueries(queriesToRun);\r\n    for (let i = 0; i < result.length; ++i) {\r\n      if(i === 0) result[0].selected = true;\r\n      else result[i].selected = false;\r\n\r\n      result[i].qid = queriesToRun[i];\r\n    }\r\n    this.setState({ queryResults: result, isLoading: false });\r\n  }\r\n\r\n  toggleQuerySelected = (index) => {\r\n    const queries = this.state.queries;\r\n    queries[index].selected = !queries[index].selected;\r\n    this.setState({ queries: queries });\r\n  }\r\n\r\n  toggleResultSelected = (index) => {\r\n    const result = this.state.queryResults;\r\n    result[index].selected = !result[index].selected;\r\n    this.setState({ queryResults: result });\r\n  }\r\n\r\n  toggleModalVisible = (index) => {\r\n    const queries = this.state.queries;\r\n    queries[index].modalVisible = !queries[index].modalVisible;\r\n    this.setState({ queries: queries });\r\n  }\r\n\r\n  queryExists = (query, index) => {\r\n    const queries = this.state.queries;\r\n    query = query.query;\r\n    for (let i = 0; i < queries.length && i !== index; ++i) {\r\n      const currQuery = queries[i].query\r\n      if (query.database === currQuery.database &&\r\n        query.sex === currQuery.sex &&\r\n        query.income === currQuery.income &&\r\n        query.education === currQuery.education &&\r\n        query.employment === currQuery.employment &&\r\n        query.age === currQuery.age) return i;\r\n    }\r\n    return -1;\r\n  }\r\n\r\n  querySelected = () => {\r\n    for (let i = 0; i < this.state.queries.length; ++i) {\r\n      if (this.state.queries[i].selected) return true;\r\n    }\r\n    return false;\r\n  }\r\n\r\n  buildQueryArrayHelper = (array) => {\r\n    let str = \"\";\r\n    for (let i = 0; i < array.length; ++i) {\r\n      str += ` ${array[i]}`;\r\n      if (i < array.length - 1) str += `,`;\r\n    }\r\n    return str;\r\n  }\r\n\r\n  buildQuery = query => {\r\n    if (query !== undefined) {\r\n      const { database, age, sex, employment, income, education } = query;\r\n      let str = \"\";\r\n      str += `Showing`;\r\n      if (database === \"employment\") {\r\n        if (!employment || employment.length == 0 || employment.length == 2) {\r\n          str += ` total employment`;\r\n        } else {\r\n          str += this.buildQueryArrayHelper(employment);\r\n        }\r\n      } else if (database === \"income\") {\r\n        if (!income || income.length == 0 || income.length == 15) {\r\n          str += ` total income`;\r\n        } else {\r\n          str += this.buildQueryArrayHelper(income);\r\n        }\r\n      } else if (database === \"education\") {\r\n        if (!education || education.length == 0 || education.length == 14) {\r\n          str += ` total education`;\r\n        } else {\r\n          str += this.buildQueryArrayHelper(education);\r\n        }\r\n      }\r\n      str += ` from ${database}`;\r\n      if (sex && sex.length == 1) {\r\n        str += ` where sex is `;\r\n        str += this.buildQueryArrayHelper(sex);\r\n      }\r\n\r\n      if (sex && age && age.length > 0) {\r\n        str += ' and';\r\n      }\r\n\r\n      if (age && age.length > 0) {\r\n        str += ` where age is `;\r\n        str += this.buildQueryArrayHelper(age);\r\n      }\r\n      return str;\r\n    }\r\n  }\r\n\r\n  async shareMyQueries(queries){\r\n    await Api.shareQueries(queries)\r\n    this.setState({shareModalVisible: false})\r\n  }\r\n\r\n  queriesSelected(){\r\n    const queries = this.state.queries;\r\n    const result = [];\r\n    let size = queries.length;\r\n    for (let i = 0; i < size; ++i) {\r\n      if (queries[i].selected) {\r\n        result.push(queries[i].query.qid);\r\n      }\r\n    }\r\n    return result;\r\n  }\r\n\r\n  onViewportChange = viewport => {\r\n    const { width, height, ...etc } = viewport\r\n    this.setState({ viewport: etc })\r\n  }\r\n\r\n  componentDidUpdate(prevProps, prevState, snapshot) {\r\n    if(this.state.queryResults) {\r\n      var anyUpdated = false;\r\n      let q = this.state.queryResults;\r\n      for(var i = 0; i < q.length; i ++) {\r\n        if(q[i].postSelect) {\r\n          anyUpdated = true;\r\n          q[i].selected = true;\r\n          q[i].postSelect = false;\r\n        }\r\n      }\r\n      if(anyUpdated)\r\n        this.setState({queryResults: q});\r\n    }\r\n  }\r\n\r\n  overrideColor = (qid, color) => {\r\n    let overrides = {};\r\n    if(this.state.overrides) {\r\n      overrides = {...this.state.overrides};\r\n    }\r\n    overrides[qid] = color;\r\n    console.log(overrides);\r\n    this.setState({\r\n      overrides: overrides\r\n    });\r\n  };\r\n\r\n  colors = [\r\n    [69, 195, 229],\r\n    [229, 181, 69],\r\n    [184, 69, 229],\r\n    [147, 229, 69],\r\n    [229, 93, 69],\r\n    [229, 138, 69],\r\n    [69, 229, 203]\r\n  ];\r\n\r\n  render() {\r\n    const { viewport, data, allDay, selectedTime, startTime, endTime, mapStyle, isShowFirstLayer, isShowSecondLayer } = this.state;\r\n\r\n    return (\r\n      <Layout style={{ minHeight: '100%' }}>\r\n        <CreateSearchQueryModal\r\n          isCreate={true}\r\n          visible={this.state.modalVisible}\r\n          onCreate={(values) => {\r\n            // default no sexes to both sexes\r\n            if (typeof values.sex != 'undefined' && values.sex.length == 0) {\r\n              values.sex = [\"male\", \"female\"];\r\n            }\r\n            this.addQueryToBuilder(values);\r\n\r\n          }}\r\n          onCancel={() => {\r\n            this.setState({\r\n              modalVisible: false\r\n            })\r\n          }}\r\n        />\r\n        <ShareQueryModal\r\n            visible={this.state.shareModalVisible}\r\n            queries={\r\n              this.queriesSelected()\r\n            }\r\n            onCreate={(values) => {\r\n              this.shareMyQueries(values);\r\n        \r\n            }}\r\n            onCancel={() => {\r\n              this.setState({\r\n                shareModalVisible: false\r\n              })\r\n            }}\r\n        />\r\n        <Sider theme='light' collapsible={false} collapsed={false} width={400} style={{ padding: 20 }}>\r\n          <div style={{\r\n            display: 'flex',\r\n            justifyContent: 'space-between'\r\n          }}>\r\n            <Title level={3}>Query Builder</Title>\r\n            <Button type=\"dashed\" onClick={() => this.setState({ modalVisible: true })} icon={<PlusOutlined />} />\r\n            <Button type=\"dashed\" disabled={!this.querySelected()} onClick={() => this.setState({ shareModalVisible: true })} icon={<ShareOutlined />} />\r\n            <Button type=\"dashed\" disabled={!this.querySelected()} onClick={() => this.deleteQueries()} icon={<DeleteOutlined />} />\r\n            <Button type=\"dashed\" loading={this.state.isLoading} disabled={!this.querySelected()} onClick={() => this.runQueries()} icon={<SearchOutlined />} />\r\n            <br />\r\n          </div>\r\n          <List>\r\n            {this.state.queries.map((query, index) => {\r\n              return <div><CreateSearchQueryModal\r\n                isCreate={false}\r\n                visible={query.modalVisible}\r\n                onCreate={(values) => {\r\n                  const oldQueries = this.state.queries;\r\n                  values.qid = oldQueries[index].query.qid;\r\n                  oldQueries[index].query = values;\r\n                  oldQueries[index].modalVisible = false;\r\n                  // don't add if already exists\r\n                  if (this.queryExists(oldQueries[index], index) !== -1) {\r\n                    this.deleteQueries([oldQueries[index].query.qid]);\r\n                    oldQueries.splice(index, 1);\r\n                  } else {\r\n                    this.saveQuery(oldQueries[index].query);\r\n                  }\r\n                  this.setState({\r\n                    queries: oldQueries\r\n                  })\r\n                }}\r\n                onCancel={() => {\r\n                  this.toggleModalVisible(index);\r\n                }}\r\n                query={query.query}\r\n              ></CreateSearchQueryModal>\r\n                <List.Item><Checkbox checked={query.selected} onChange={() => this.toggleQuerySelected(index)}>\r\n                  {this.buildQuery(query.query)} (Query <b>{query.query.qid}</b>)\r\n                 </Checkbox><Button type=\"dashed\" onClick={() => this.toggleModalVisible(index)} icon={<EditOutlined />} />\r\n                </List.Item></div>\r\n            })}\r\n          </List>\r\n  \r\n        </Sider>\r\n        <Layout>\r\n          <Content>\r\n            <div style={{ height: '100%', position: 'relative' }}>\r\n              <ReactMapGL\r\n                width='100%'\r\n                height='100%'\r\n                mapStyle={mapStyle}\r\n                {...this.state.viewport}\r\n                onViewportChange={viewport => this.onViewportChange(viewport)}\r\n                mapboxApiAccessToken='pk.eyJ1IjoidHBpbnRvNyIsImEiOiJja2JicWYwMzkwM3NnMnNtZnZkbXU5dGhkIn0.NdzHwoMYvZ-fSTIA9xXXfw'\r\n\r\n              >\r\n              {this.state.queryResults.map((result) => (\r\n                result.selected && (\r\n                <Source id={\"layer\" + result.qid} type=\"geojson\" data={result.layer}>\r\n                <Layer id={\"layer\" + result.qid} {...result.heatmap} />\r\n              </Source>)\r\n              ))}  \r\n\r\n              </ReactMapGL>\r\n              <div className=\"control-panel\">\r\n                <h3>Heatmap</h3>\r\n\r\n                <hr />\r\n                {this.state.queryResults.map((result, index) => {\r\n                  return <div>\r\n                    <Checkbox checked={result.selected} onChange={() => this.toggleResultSelected(index)}>\r\n                    </Checkbox> Query {result.qid}\r\n                  </div>\r\n                })}\r\n              </div>\r\n              <div className=\"map-legends\">\r\n                {this.state.queryResults.map((result, index) => {\r\n                  if (result.selected) {\r\n                    const obj = this.state.queries.find((e) => e.query.qid === result.qid);\r\n                    if(obj) {\r\n                        const dto = obj.query;\r\n                        let color = result.hue;\r\n                        if (dto && dto.color) {\r\n                            let a = this.colors[dto.color];\r\n                            color = `rgb(${a[0]},${a[1]},${a[2]})`\r\n                        }\r\n                        if (this.state.overrides && this.state.overrides[result.qid] !== undefined) {\r\n                            let a = this.colors[this.state.overrides[result.qid]];\r\n                            color = `rgb(${a[0]},${a[1]},${a[2]})`\r\n                        }\r\n                        return (\r\n                            <Legend minimum={result.min} maximum={result.max} color={color} units={result.units}\r\n                                    queryId={result.qid}/>\r\n                        )\r\n                    }\r\n                  }\r\n                })}\r\n              </div>\r\n\r\n                <div className=\"control-panel2\">\r\n                  <VisualQueryEditor queries={this.state.queryResults} dtos={this.state.queries}\r\n                                     onChange={(queries) => {this.setState({queryResults: queries}); }}\r\n                                     onColorChange={(qid, color) => this.overrideColor(qid, color)}\r\n                                      onSaveDto={(query) => this.saveDto(query)}/>\r\n                </div>\r\n            </div>\r\n          </Content>\r\n        </Layout > \r\n      </Layout >\r\n    );\r\n  }\r\n}\r\n","import React, { Component } from 'react';\r\nimport {Layout, List, Switch as Toggle, Avatar, Col, Row, Card, Descriptions, Modal, Button} from 'antd';\r\nimport {\r\n   UserOutlined,\r\n   SketchOutlined,\r\n   DribbbleOutlined,\r\n   HeartOutlined, \r\n   WomanOutlined,\r\n   StarOutlined,\r\n   RocketOutlined,\r\n   FireOutlined,\r\n   ConsoleSqlOutlined\r\n} from '@ant-design/icons';\r\nimport { Api } from '../../network/api/Api';\r\n\r\nconst iconMap = {\r\n  0: <UserOutlined />,\r\n  1: <SketchOutlined />,\r\n  2: <DribbbleOutlined />,\r\n  3: <HeartOutlined />,\r\n  4: <WomanOutlined />,\r\n  5: <StarOutlined />,\r\n  6: <RocketOutlined />,\r\n  7: <FireOutlined />,\r\n};\r\n\r\nexport class Settings extends Component {\r\n    constructor(props) {\r\n      super(props);\r\n      this.state = {\r\n        username: '',\r\n        first: '',\r\n        last: '',\r\n        numQueries: 0,\r\n        isDarkModeEnabled: false,\r\n        showModal: false,\r\n        icon: 0\r\n      }\r\n    }\r\n    \r\n    componentDidMount() {\r\n      this.fetchUserInfo();\r\n    }\r\n\r\n    async fetchUserInfo() {\r\n      const userInfo = await Api.getUserMe();\r\n      this.setState({\r\n        username: userInfo.user_name,\r\n        first: userInfo.first_name,\r\n        last: userInfo.last_name,\r\n        numQueries: userInfo.num_queries,\r\n        isDarkModeEnabled: userInfo.dark_mode,\r\n        icon: userInfo.icon\r\n      });\r\n    }\r\n\r\n    toggleDarkMode = async (checked) => {\r\n      // TODO: call api when backend is up\r\n      if(checked){\r\n        await Api.updateDarkMode(true);\r\n      } else await Api.updateDarkMode(false);\r\n      this.setState({isDarkModeEnabled: checked});\r\n    }\r\n\r\n    async updateIcon(icon){\r\n      await Api.updateIcon(icon);\r\n      this.setState({\r\n        icon: icon,\r\n        showModal: false\r\n      })\r\n    }\r\n\r\n    render(){\r\n        return (\r\n            <Layout style={{ minHeight: '100%' }}>\r\n              <Row align=\"middle\">\r\n                <Col span={12} offset={6}>\r\n                  <Card style={{textAlign: 'center'}}>\r\n                    <div><Avatar size={64} icon={iconMap[this.state.icon]} onClick={() => this.setState({showModal: true})} /></div>\r\n                    <Descriptions style={{marginTop: \"20px\"}} title=\"User Info\">\r\n                    <Descriptions.Item label=\"Username\">{this.state.username}</Descriptions.Item>\r\n                    <Descriptions.Item label=\"First Name\">{this.state.first}</Descriptions.Item>\r\n                    <Descriptions.Item label=\"Last Name\">{this.state.last}</Descriptions.Item>\r\n                    <Descriptions.Item label=\"Number Of Queries\">{this.state.numQueries}</Descriptions.Item>\r\n                    </Descriptions>\r\n                    <div>Dark Mode <Toggle checked={this.state.isDarkModeEnabled} onChange={this.toggleDarkMode} /></div>\r\n                  </Card>\r\n                </Col>\r\n              </Row>\r\n              <Modal\r\n              title={`Set Profile Icon`}\r\n              centered\r\n              visible={this.state.showModal}\r\n              onOk={() => this.setState({ showModal: false })}\r\n              onCancel={() => this.setState({ showModal: false })}\r\n              footer={[\r\n                <Button key=\"back\" onClick={() => this.setState({ showModal: false })}>\r\n                  Close\r\n                </Button>,\r\n              ]}\r\n            >\r\n              <Row>\r\n                <Col span={6}><Avatar size={48} onClick={() => this.updateIcon(0)} icon={<UserOutlined />}/></Col>\r\n                <Col span={6}><Avatar size={48} onClick={() => this.updateIcon(1)} icon={<SketchOutlined />}/></Col>\r\n                <Col span={6}><Avatar size={48} onClick={() => this.updateIcon(2)} icon={<DribbbleOutlined />}/></Col>\r\n                <Col span={6}><Avatar size={48} onClick={() => this.updateIcon(3)} icon={<HeartOutlined />}/></Col>\r\n              </Row>\r\n              <br></br>\r\n              <Row>\r\n                <Col span={6}><Avatar size={48} onClick={() => this.updateIcon(4)} icon={<WomanOutlined />}/></Col>\r\n                <Col span={6}><Avatar size={48} onClick={() => this.updateIcon(5)} icon={<StarOutlined />}/></Col>\r\n                <Col span={6}><Avatar size={48} onClick={() => this.updateIcon(6)} icon={<RocketOutlined />}/></Col>\r\n                <Col span={6}><Avatar size={48} onClick={() => this.updateIcon(7)} icon={<FireOutlined />}/></Col>\r\n              </Row>\r\n\r\n            </Modal>\r\n            </Layout>\r\n            \r\n        );\r\n    }\r\n}","import React from 'react';\r\nimport { Input, AutoComplete, Table, Tag, Space, message, Modal, Button, Checkbox, Typography } from 'antd';\r\nimport { Api } from '../../network/api/Api';\r\nconst { Title } = Typography;\r\nconst educationLUT = {\r\n  1: \"total education\",\r\n  2: \"no certificate, diploma or degree\",\r\n  3: \"secondary (high) school diploma or equivalency certificate\",\r\n  4: \"postsecondary certificate, diploma or degree\",\r\n  5: \"apprenticeship or trades certificate or diploma\",\r\n  6: \"trades certificate or diploma other than Certificate of Apprenticeship or Certificate of Qualification\",\r\n  7: \"certificate of Apprenticeship or Certificate of Qualification\",\r\n  8: \"college, CEGEP or other non-university certificate or diploma\",\r\n  9: \"university certificate or diploma below bachelor level\",\r\n  10: \"university certificate, diploma or degree at bachelor level or above\",\r\n  11: \"bachelor's degree\",\r\n  12: \"university certificate or diploma above bachelor level\",\r\n  13: \"degree in medicine, dentistry, veterinary medicine or optometry\",\r\n  14: \"master's degree\",\r\n  15: \"earned doctorate\",\r\n}\r\n\r\nconst educationLUTReverse = {\r\n  \"total education\": 1,\r\n  \"no certificate, diploma or degree\": 2,\r\n  \"secondary (high) school diploma or equivalency certificate\": 3,\r\n  \"postsecondary certificate, diploma or degree\": 4,\r\n  \"apprenticeship or trades certificate or diploma\": 5,\r\n  \"trades certificate or diploma other than Certificate of Apprenticeship or Certificate of Qualification\": 6,\r\n  \"certificate of Apprenticeship or Certificate of Qualification\": 7,\r\n  \"college, CEGEP or other non-university certificate or diploma\": 8,\r\n  \"university certificate or diploma below bachelor level\": 9,\r\n  \"university certificate, diploma or degree at bachelor level or above\": 10,\r\n  \"bachelor's degree\": 11,\r\n  \"university certificate or diploma above bachelor level\": 12,\r\n  \"degree in medicine, dentistry, veterinary medicine or optometry\": 13,\r\n  \"master's degree\": 14,\r\n  \"earned doctorate\": 15,\r\n}\r\n\r\nconst incomeLUT = {\r\n  1: \"total income\",\r\n  2: \"market income\",\r\n  3: \"employment income\",\r\n  4: \"wages, salaries and commissions\",\r\n  5: \"net self-employment income\",\r\n  6: \"investment income\",\r\n  7: \"private retirement income\",\r\n  8: \"market income not included elsewhere\",\r\n  9: \"government transfers\",\r\n  10: \"OAS and GIS\",\r\n  11: \"CPP and QPP\",\r\n  12: \"EI benefits\",\r\n  13: \"child benefits\",\r\n  14: \"other government transfers\",\r\n  15: \"after-tax income\",\r\n  16: \"income taxes\"\r\n};\r\n\r\nconst incomeLUTReverse = {\r\n  \"total income\": 1,\r\n  \"market income\": 2,\r\n  \"employment income\": 3,\r\n  \"wages, salaries and commissions\": 4,\r\n  \"net self-employment income\": 5,\r\n  \"investment income\": 6,\r\n  \"private retirement income\": 7,\r\n  \"market income not included elsewhere\": 8,\r\n  \"government transfers\": 9,\r\n  \"OAS and GIS\": 10,\r\n  \"CPP and QPP\": 11,\r\n  \"EI benefits\": 12,\r\n  \"child benefits\": 13,\r\n  \"other government transfers\": 14,\r\n  \"after-tax income\": 15,\r\n  \"income taxes\": 16\r\n};\r\n\r\nconst sexLUT = {\r\n  1: \"malefemale\",\r\n  2: \"male\",\r\n  3: \"female\"\r\n};\r\n\r\nconst sexLUTReverse = {\r\n  \"malefemale\": 1,\r\n  \"male\": 2,\r\n  \"female\": 3\r\n};\r\n\r\nconst ageLUT = {\r\n  1: \"all\",\r\n  2: \"15-24\",\r\n  5: \"25-34\",\r\n  6: \"35-44\",\r\n  7: \"45-54\",\r\n  8: \"55-64\",\r\n  9: \"65+\"\r\n}\r\n\r\nconst ageLUTReverse = {\r\n  \"all\": 1,\r\n  \"15-24\": 2,\r\n  \"25-34\": 5,\r\n  \"35-44\": 6,\r\n  \"45-54\": 7,\r\n  \"55-64\": 8,\r\n  \"65+\": 9\r\n}\r\n\r\nexport class FriendsPage extends React.Component {\r\n  state = {\r\n    entries: [],\r\n    friends: [],\r\n    value: '',\r\n    showModal: false,\r\n    modalUsername: '',\r\n    queries: []\r\n  }\r\n\r\n  columns = [\r\n    {\r\n      title: 'Username',\r\n      dataIndex: 'username',\r\n      key: 'username',\r\n    },\r\n    // {\r\n    //   title: 'First Name',\r\n    //   dataIndex: 'first_name',\r\n    //   key: 'first_name',\r\n    // },\r\n    // {\r\n    //   title: 'Last Name',\r\n    //   dataIndex: 'last_name',\r\n    //   key: 'last_name',\r\n    // },\r\n    {\r\n      title: 'Action',\r\n      key: 'action',\r\n      render: (text, record) => {\r\n        return (\r\n          <Space size=\"middle\" onClick={() => this.getUserQueries(record.username)}>\r\n            <a>Show Queries</a>\r\n          </Space>\r\n        )\r\n      }\r\n      ,\r\n    },\r\n  ]\r\n\r\n  queryColumns = [\r\n    {\r\n      title: 'Selected',\r\n      key: 'selected',\r\n      render: (text, record) => {\r\n        return (\r\n          <Checkbox checked={record.query.selected} onChange={() => this.toggleQuerySelected(record)}>\r\n          </Checkbox>\r\n        )\r\n      }\r\n    },\r\n    {\r\n      title: 'Query',\r\n      dataIndex: 'query',\r\n      key: 'query',\r\n      render: (text, record) => {\r\n        return (\r\n          this.buildQuery(record.query)\r\n        )\r\n      }\r\n    }\r\n  ]\r\n\r\n  toggleQuerySelected = (query) => {\r\n    console.log(query);\r\n    const result = this.state.queries;\r\n    result[query.id].selected = !result[query.id].selected;\r\n    this.setState({ queries: result });\r\n  }\r\n\r\n  componentDidMount() {\r\n    Api.fetchFriends().then(friends => {\r\n      this.setState({\r\n        friends\r\n      })\r\n    })\r\n  }\r\n\r\n  async shareQueries() {\r\n    const queries = this.state.queries;\r\n    const username = this.state.modalUsername;\r\n    const req = [];\r\n    for (let i = 0; i < queries.length; ++i) {\r\n      if (queries[i].selected) {\r\n        // const shareQuery = {\r\n        //   qid: qidqueries[i].,\r\n        //   username: username\r\n        // }\r\n        // req.push(shareQuery);\r\n        req.push(queries[i].qid)\r\n      }\r\n    }\r\n    console.log(req)\r\n    await Api.duplicateQueries(req);\r\n    this.setState({ showModal: false, modalUsername: '', queries: [] })\r\n  }\r\n\r\n  async getUserQueries(username) {\r\n    const apiQueries = await Api.getFriendQueries(username)\r\n\r\n    let queries = [];\r\n    for (let i = 0; i < apiQueries.length; ++i) {\r\n      // note: need to deal w query exists?\r\n      const apiQuery = apiQueries[i];\r\n      const education = [];\r\n      const income = [];\r\n      let sex = [];\r\n      const age = [];\r\n      if (!(apiQuery.params.length == 1 && apiQuery.params[0] == 1)) {\r\n        if (apiQuery.dataset === \"education\") {\r\n\r\n          for (let j = 0; j < apiQuery.params.length; ++j) {\r\n            education.push(educationLUT[apiQuery.params[j]]);\r\n          }\r\n        } else if (apiQuery.dataset === \"employment\") {\r\n          for (let j = 0; j < apiQuery.params.length; ++j) {\r\n            income.push(incomeLUT[apiQuery.params[j]]);\r\n          }\r\n        }\r\n      }\r\n      sex = apiQuery.sex && apiQuery.sex !== 1 ? [sexLUT[apiQuery.sex]] : [\"male\", \"female\"];\r\n      // TODO: i should not be storing malefemale \r\n      if (apiQuery.age) {\r\n        for (let j = 0; j < apiQuery.age.length; ++j) {\r\n          if (apiQuery.age[j] !== 1) {\r\n            age.push(ageLUT[apiQuery.age[j]]);\r\n          }\r\n        }\r\n      }\r\n      const query = {\r\n        qid: apiQuery.qid,\r\n        database: apiQuery.dataset,\r\n        education: education,\r\n        income: income,\r\n        sex: sex,\r\n        age: age,\r\n        selected: false\r\n      };\r\n\r\n      queries.push(query);\r\n    }\r\n\r\n    console.log(queries)\r\n    this.setState({ showModal: true, modalUsername: username, queries: queries })\r\n  }\r\n\r\n  buildQuery = query => {\r\n    if (query !== undefined) {\r\n      const { database, age, sex, income, education } = query;\r\n      let str = \"\";\r\n      str += `Showing`;\r\n      if (database === \"employment\") {\r\n        if (!income || income.length == 0 || income.length == 15) {\r\n          str += ` total income`;\r\n        } else {\r\n          str += this.buildQueryArrayHelper(income);\r\n        }\r\n      } else if (database === \"education\") {\r\n        if (!education || education.length == 0 || education.length == 14) {\r\n          str += ` total education`;\r\n        } else {\r\n          str += this.buildQueryArrayHelper(education);\r\n        }\r\n      }\r\n      str += ` from ${database}`;\r\n      if (sex) {\r\n        if (sex.length == 0) {\r\n          // TODO: add to male/female?\r\n        }\r\n        str += ` where sex is `;\r\n        str += this.buildQueryArrayHelper(sex);\r\n      }\r\n\r\n      if (sex && age && age.length > 0) {\r\n        str += ' and';\r\n      }\r\n\r\n      // make it lower range bound (15, 25, 35)\r\n      if (age && age.length > 0) {\r\n        str += ` where age is `;\r\n        str += this.buildQueryArrayHelper(age);\r\n      }\r\n      return str;\r\n    }\r\n  }\r\n\r\n  buildQueryArrayHelper = (array) => {\r\n    let str = \"\";\r\n    for (let i = 0; i < array.length; ++i) {\r\n      str += ` ${array[i]}`;\r\n      if (i < array.length - 1) str += `,`;\r\n    }\r\n    return str;\r\n  }\r\n\r\n  render() {\r\n    const onSelect = async (data) => {\r\n      const username = data.split(\":\")[0];\r\n      await Api.addFriend([username]);\r\n      this.setState({\r\n        friends: [...this.state.friends, { username }],\r\n        value: '',\r\n      })\r\n      message.success(`Successfully added ${username}`)\r\n    };\r\n\r\n    const onSearch = (searchText) => {\r\n      Api.searchFriend(searchText).then(entries => {\r\n        this.setState({\r\n          entries: entries.map(obj => `${obj.username}: ${obj.firstName} ${obj.lastName}`)\r\n        })\r\n      })\r\n      // setOptions(\r\n      //   !searchText ? [] : [mockVal(searchText), mockVal(searchText, 2), mockVal(searchText, 3)],\r\n      // );\r\n    };\r\n\r\n    return (\r\n      <div style={{ display: 'flex', flexDirection: 'column', margin: 30 }}>\r\n        <Title level={4}>Add Friends</Title>\r\n        <div style={{ display: 'flex', width: '100%' }}>\r\n          <AutoComplete\r\n            value={this.state.value}\r\n            onChange={e => {\r\n              this.setState({\r\n                value: e\r\n              })\r\n            }\r\n            }\r\n            options={this.state.entries.map(value => { return { value }; })}\r\n            style={{ width: '100%', justifyContent: 'center', margin: '0 auto', display: 'block' }}\r\n            onSelect={onSelect}\r\n            onSearch={onSearch}\r\n          >\r\n            <Input.Search size=\"large\" placeholder=\"input here\" enterButton />\r\n          </AutoComplete>\r\n        </div>\r\n        <div style={{ paddingTop: 20 }} />\r\n        <Title level={4}>Friends List</Title>\r\n        <Table columns={this.columns} dataSource={this.state.friends.map((friend, i) => {\r\n          return {\r\n            id: i,\r\n            username: friend.username,\r\n          }\r\n        })} />\r\n        <Modal\r\n          title={`Queries for ${this.state.modalUsername}`}\r\n          centered\r\n          visible={this.state.showModal}\r\n          onOk={() => this.setState({ showModal: false })}\r\n          onCancel={() => this.setState({ showModal: false })}\r\n          footer={[\r\n            <Button key=\"back\" onClick={() => this.setState({ showModal: false })}>\r\n              Close\r\n            </Button>,\r\n            <Button key=\"back\" onClick={() => this.shareQueries()}>\r\n              Copy\r\n            </Button>,\r\n          ]}\r\n        >\r\n          <Table columns={this.queryColumns} dataSource={this.state.queries.map((query, i) => {\r\n            return {\r\n              id: i,\r\n              query: query\r\n            }\r\n          })} />\r\n\r\n        </Modal>\r\n      </div >\r\n    );\r\n  }\r\n}","import React from 'react';\r\nimport { Layout, Menu } from 'antd';\r\nimport {\r\n  PieChartOutlined,\r\n  SettingOutlined,\r\n  UsergroupAddOutlined\r\n} from '@ant-design/icons';\r\nimport {\r\n  Link\r\n} from \"react-router-dom\";\r\n\r\nimport {\r\n  LoginOutlined\r\n} from '@ant-design/icons';\r\nimport { Map } from './Map';\r\nimport { Settings } from './Settings';\r\nimport { FriendsPage } from '../friends/FriendsPage'\r\n\r\n\r\nconst { Sider } = Layout;\r\n\r\nfunction onChange(e) {\r\n  console.log(`checked = ${e.target.checked}`);\r\n}\r\n\r\nexport class Dashboard extends React.Component {\r\n  state = {\r\n    collapsed: false,\r\n    page: 0,\r\n  };\r\n\r\n  onCollapse = collapsed => {\r\n    console.log(collapsed);\r\n    this.setState({ collapsed });\r\n  };\r\n\r\n  onChange = e => {\r\n    console.log(`checked = ${e.target.checked}`);\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <Layout style={{ minHeight: '100vh' }}>\r\n        <Sider collapsible collapsed={this.state.collapsed} onCollapse={this.onCollapse}>\r\n          <div className=\"logo\" />\r\n          <Menu theme=\"dark\" defaultSelectedKeys={['1']} mode=\"inline\">\r\n            <Menu.Item key=\"1\" icon={<PieChartOutlined />} onClick={() => this.setState({ page: 0 })}>\r\n              Visualization\r\n            </Menu.Item>\r\n            <Menu.Item key=\"2\" icon={<UsergroupAddOutlined />} onClick={() => this.setState({ page: 1 })}>\r\n              Friends\r\n            </Menu.Item>\r\n            <Menu.Item key=\"3\" icon={<SettingOutlined />} onClick={() => this.setState({ page: 2 })}>\r\n              Account Settings\r\n            </Menu.Item>\r\n            <Menu.Item key=\"4\" icon={<LoginOutlined />}>\r\n              <Link to='/'>\r\n                Log out\r\n            </Link>\r\n            </Menu.Item>\r\n          </Menu>\r\n        </Sider>\r\n        <Layout className=\"site-layout\">\r\n          <div style={{ height: '100%', position: 'relative' }}>\r\n            {this.state.page === 0 && <Map />}\r\n            {this.state.page === 1 && <FriendsPage />}\r\n            {this.state.page === 2 && <Settings />}\r\n          </div>\r\n        </Layout>\r\n      </Layout>\r\n    );\r\n  }\r\n}","import React from 'react';\r\nimport { Layout, Typography } from 'antd';\r\nimport { LoginPage } from './pages/login/LoginPage';\r\nimport styled from 'styled-components';\r\nimport { RegisterPage } from './pages/register/RegisterPage';\r\nimport {\r\n  BrowserRouter as Router,\r\n  Switch,\r\n  Route,\r\n} from \"react-router-dom\";\r\nimport { Observer } from 'mobx-react'\r\nimport { TopNavigationBar } from './pages/home/TopNavigationBar';\r\nimport { Dashboard } from './pages/dashboard/Dashboard';\r\nimport { PersistenceStore } from './stores/PersistenceStore';\r\nimport { UserStore } from './stores/UserStore';\r\nconst { Title } = Typography;\r\n\r\nconst Container = styled.div`\r\n  position: absolute;\r\n  left: 50%;\r\n  top: 50%;\r\n  -webkit-transform: translate(-50%, -50%);\r\n  transform: translate(-50%, -50%);\r\n`;\r\n\r\n\r\nexport class App extends React.Component {\r\n  state = {\r\n    loading: true\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.fetchData();\r\n  }\r\n\r\n  async fetchData() {\r\n    await PersistenceStore.fetchItems();\r\n    this.setState({\r\n      loading: false\r\n    })\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      !this.state.loading && <Observer>{() =>\r\n        <Router>\r\n          <Switch>\r\n            <Route path=\"/login\">\r\n              <TopNavigationBar />\r\n              <Container>\r\n                <LoginPage />\r\n              </Container>\r\n            </Route>\r\n            <Route path=\"/register\">\r\n              <TopNavigationBar />\r\n              <Container>\r\n                <RegisterPage />\r\n              </Container>\r\n            </Route>\r\n            <Route path=\"/dashboard\">\r\n              <Dashboard />\r\n            </Route>\r\n            <Route path=\"/\">\r\n              <TopNavigationBar />\r\n              <Container>\r\n                <Title level={1} style={{ textAlign: 'center' }}>CS 348 Project</Title>\r\n                <Title level={3} style={{ textAlign: 'center' }}>Census Data Visualization</Title>\r\n              </Container>\r\n            </Route>\r\n          </Switch>\r\n        </Router>\r\n      }\r\n      </Observer>\r\n    );\r\n  }\r\n}\r\n\r\nexport default App;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport App from './App';\r\nimport 'antd/dist/antd.css';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);"],"sourceRoot":""}